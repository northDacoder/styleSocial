
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>styleSocial</title>

    <!-- Custom Font Icons -->
    <link href='https://fonts.googleapis.com/css?family=Caesar+Dressing|Cherry+Cream+Soda|Josefin+Sans:100,400|Rokkitt|Graduate|Pacifico|Special+Elite|Playball|Sancreek' rel='stylesheet' type='text/css'>
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
   
    <!-- Css Styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/scrolling-nav.css" rel="stylesheet" type="text/css">
    <!--<link href="https://bootswatch.com/paper/bootstrap.min.css" rel="stylesheet" type="text/css">-->

 
    <script src="js/jquery-1.10.2.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src="js/jquery.easing.min.js"></script>
    <script src="js/scrolling-nav.js"></script>

    <style type="text/css">
       #insta-login, #insta-logout {    
            margin-right: 10px;
            border-radius: 0;
            position: relative;
            top: 10px;
       }
    </style>

    <script type="text/javascript">
        $(document).ready(function() {
            var posts = [];
            var instagramHTML = $("#instagram");



            // $.ajax({
            //     // url: 'https://api.instagram.com/v1/tags/search?q=snowy&access_token=ACCESS-TOKEN',
            //     url: 'https://api.instagram.com/v1/tags/nofilter/media/recent?client_id=283747d2bcf5489c8af8b752b0f92cc5',
            //     dataType: 'jsonp',
            //     type: 'GET',
            //     success: function(response) {
            //         console.log("Success!");
            //         console.log(response.data);
            //         posts = response.data;

            //         for (var i = 0; i < posts.length; i++) {
            //             instagramHTML.append('<div class="well">' + '<img src="' + posts[i].images.standard_resolution.url + '" class="img-responsive img-circle" style="border: 4px dashed red;"/>' +  '<p class="lead">Tags: ' + posts[i].filter + '<br>' + posts[i].caption.text + '</p></div>');
            //         }
            //     },
            //     error: function(error) {
            //         console.log("Error!");
            //         console.log(error);
            //     }
            // });


              console.log("Document is now ready!");
              var imageHolder = $("#instafeed");
              console.log($(window));
              var myToken = window.location.hash.split("=");
              myToken = myToken[1];
              // console.log(myToken);
              
            // function createHtml (data) {
            //     console.log("createHtml function fired");
            //     data = data.data; 
            //     for (var i = 0; i < data.length; i++) {
            //         console.log(data[i]);
            //         var image = data[i].images.standard_resolution.url;
            //         console.log(image);
            //         var htmlString = 
            //                     '<div class="">' + 
            //                       '<h3 class="text-center" style="color: white; position: absolute; background: #3f729b;">' + data[i].user.username + '</h3>' +  
            //                       '<img src="' + image + '" class="img-responsive" style="width: 100%; height: auto;"/>' +
            //                     '</div>';
            //         imageHolder.append(htmlString);
            //         imageHolder.append(data[i]);
            //     }

            // }

            function createHtml (data) {
                console.log(data);
                data = data.data; 
                for (var i = 0; i < data.length; i++) {
                    console.log(data[i]);
                    var image = data[i].images.standard_resolution.url;
                    console.log(image);
                    var htmlString = 
                                '<div class="">' + 
                                  '<h3 class="text-center" style="color: white; position: absolute; background: #3f729b;">' + data[i].user.username + '</h3>' +  
                                  '<img src="' + image + '" class="img-responsive" style="width: 100%; height: auto;"/>' +
                                '</div>';
                    imageHolder.append(htmlString);
                    imageHolder.append(data[i]);
                }

            }

              
            var searchQuery = "targetstyle";


            function getData (q) {

                $.ajax({
                    type: 'GET',
                    // url: "https://api.instagram.com/v1/users/self/feed?access_token=" + myToken,
                    url: "https://api.instagram.com/v1/tags/" + q + "/media/recent?access_token=" + myToken,
                    dataType: 'jsonp',
                    success: function(json) {
                      console.log("Data has been loaded from Instagram"); 
                      createHtml(json);
                    },
                    error:  function(error) {
                      console.log(error);
                    }
                });
            }
              

              
            $("#insta-search").on('keypress', function (e) {

                if (e.keyCode == 13) {
                    searchQuery = $("#insta-search").val();
                }

                getData(searchQuery);
            });

            getData(searchQuery);


            var instagramLogin = $("#insta-login");
            var instagramLogout = $("#insta-logout");

            if (myToken != undefined) {
                instagramLogin.hide();
                instagramLogout.show();
            } else {
                instagramLogout.hide();
                instagramLogin.show();
            }
        });
    </script>

</head>

<!-- The #page-top ID is part of the scrolling feature - the data-spy and data-target are part of the built-in Bootstrap scrollspy function -->
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top"><i class="fa fa-github"></i> STYLE SOCIAL</a>
            </div>


            <!--<div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                   
                    
                </ul>
                <ul style="list-style-type: none;">
                    <li class="pull-right">
                        <a href="https://instagram.com/oauth/authorize/?client_id=283747d2bcf5489c8af8b752b0f92cc5&redirect_uri=http://localhost:4000&response_type=token"><button class="btn btn-primary btn-sm">Login <i class="fa fa-instagram"></i> </button></a>
                        <a href="https://instagram.com/accounts/logout/" class="btn btn-danger btn-sm"> Logout <i class="fa fa-sign-out"></i></a>
                    </li>
                </ul>
            </div>-->

            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row" style="margin-top: 100px;">
            <div class="col-sm-6" style="border-right: 1px dashed rgba(0,0,0,.1); padding: 0;" id="instafeed">

                <a href="https://instagram.com/oauth/authorize/?client_id=283747d2bcf5489c8af8b752b0f92cc5&redirect_uri=http://localhost:4000&response_type=token"class="btn btn-primary btn-lg pull-right" id="insta-login" >Login <i class="fa fa-instagram"></i></a>
                <a href="https://instagram.com/accounts/logout/" class="btn btn-danger btn-lg pull-right" id="insta-logout"> Logout <i class="fa fa-sign-out"></i></a>

                <h2 class="pull-left" style="color: rgba(0,0,0,.7); padding-left: 20px;"><i class="fa fa-instagram"></i> Instagram</h2>

                <div class="form-group">
                    <input type="text" id="insta-search" class="input-lg form-control" placeholder="#targetStyle" style="background: white; padding-left: 10px;">
                </div>
            </div>
            <div class="col-sm-6"></div>

        </div>
    </div>
  
</body>
</html>









